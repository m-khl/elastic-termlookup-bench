{
    "version": 2,
    "description": "Term lookups benchmark",
    "indices": [
        {
            "name": "books",
            "body": "books_index.json",
            "types": [ "book" ]
        },
        {
            "name": "subscriptions",
            "body": "subscriptions_index.json",
            "types": [ "subscription" ]
        }
    ],
    "corpora": [
          {
            "name": "books",
            "base-url": "./",
            "target-type": "book",
            "documents": [
              {
                "source-file": "books.json",
                "target-index": "books",
                "document-count": 1255615
              }
            ]
          }
        ],
    "challenges": [
        {
            "name": "index-update-scenario",
            "default": true,
            "schedule": [
                {
                    "operation": {
                        "operation-type": "delete-index",
                        "index":["books","subscriptions"]
                    }
                },
                {
                    "operation": {
                        "operation-type": "create-index",
                        "index":["books","subscriptions"]
                    }
                },
                {
                  "parallel":{ "tasks":[ {
                        "operation": {
                            "name": "bulk-insert-books",
                            "operation-type": "bulk",
                            "bulk-size":1000,
                            "conflicts":"sequential",
                            "conflict-probability":"0"
                        }
                    },
                    {
                        "operation": {
                            "name": "bulk-insert-subscriptions",
                            "operation-type": "bulk",
                            "param-source": "subscriptions-insert-param-source"
                        }
                    }
                ]}},
                {
                    "parallel": {
                        "completed-by":"bulk-update",
                        "tasks": [
                            {
                                "operation": {
                                    "name": "randomized search",
                                    "operation-type": "search",
                                    "param-source": "search-param-source",
                                    "titles":{% include 'titles.txt' %},
                                    "subscriptions":{% include 'subscriptions.txt' %}
                                },
                                "clients": 1,
                                "target-throughput": 1
                            },
                            {
                                "operation": {
                                    "name": "bulk-update",
                                    "operation-type": "bulk",
                                    "books-to-update":1500,
                                    "param-source": "update-param-source",
                                    "num_ids":1255614,
                                    "subscriptions":{% include 'subscriptions.txt' %}
                                },
                                "clients": 1,
                                "iterations": 676
                            }

                        ]
                    }
                }
            ]
        }
    ]
}

