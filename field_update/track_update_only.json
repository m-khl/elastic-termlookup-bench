{
    "version": 2,
    "description": "Field update benchmark",
    "indices": [
        {
            "name": "books"
        }
    ],
    {% set docs=100000000 %}
                        {% set insert_bulk_size=1000 %}
                        {% set subs=2000 %}
                        {% set subs_per_book=10 %}
    "challenges": [
        {
            "name": "field-update-scenario",
            "default": true,
            "schedule": [
                
                {
                    "parallel": {
                        "completed-by":"bulk-update",
                        "tasks": [
                            {
                                "operation": {
                                    "name": "randomized search",
                                    "operation-type": "search",
                                    "param-source": "search-param-source",
                                    "subs-total":{{subs}}
                                },
                                "clients": 1,
                                "target-throughput": 1
                            },
                            {
                                "operation": {
                                    "name": "bulk-update",
                                    "operation-type": "bulk",
                                    "bulk-size":{{insert_bulk_size}},
                                    "param-source": "update-param-source",
                                    "subs-total":{{subs}},
                                    "subs-per-book":{{subs_per_book}},
                                    "books-total": {{docs}} 
                                },
                                "clients": 1,
                                "iterations": {{(docs/insert_bulk_size/100)|int}}
                            }

                        ]
                    }
                }
            ]
        }
    ]
}

